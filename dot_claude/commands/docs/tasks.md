---
allowed-tools: Read, Write, Edit, Glob, LS
description: "設計書を基にタスクを分解し、並列実行可能なタスクをフェーズごとにグループ化して提示するコマンド。優先度を設定し、効率的な作業計画を支援します。"
---

# タスク分割

設計書を基にタスクを分解します: $ARGUMENTS

## 実行手順

### 1. 設計書の読み込み

対象となる設計書を特定します：

- **引数指定あり**: $ARGUMENTSで指定されたファイル名を使用
- **引数指定なし**: `docs/design/`ディレクトリから最新のファイルを自動選択

設計書から以下の情報を抽出します：
- 実装範囲
- 技術要素
- モジュール構成
- 機能要件

### 2. タスクの洗い出し

設計書の内容に基づいて、具体的なタスクを洗い出します：

- **実装タスク**: コーディングが必要な作業
- **設定タスク**: 環境構築、設定ファイルの作成
- **テストタスク**: 単体テスト、結合テストの作成
- **ドキュメントタスク**: 必要に応じたドキュメント作成

### 3. 依存関係の分析

各タスクの依存関係を分析し、以下を特定します：

- **前提条件**: 他のタスクの完了が必要なもの
- **独立タスク**: 他のタスクに依存せず、即座に開始可能なもの
- **後続タスク**: 他のタスクの完了後に実行可能なもの

### 4. フェーズ分けとグループ化

依存関係に基づいて、タスクをフェーズに分けます：

- **Phase 1**: 即座に開始可能な独立タスク（並列実行可能）
- **Phase 2**: Phase 1の一部完了後に開始可能なタスク
- **Phase 3以降**: 順次依存関係に基づいて配置

### 5. 優先度の設定

各タスクに優先度を設定します：

- **High**: クリティカルパス上のタスク、ブロッカーとなるタスク
- **Medium**: 主要機能の実装、重要な設定
- **Low**: 改善系タスク、オプション機能

### 6. タスクリストの生成

`docs/tasks/`ディレクトリに以下の形式でタスクリストを生成します：

```markdown
# [プロジェクト名] タスクリスト

## 概要
- 対象設計書: [設計書ファイル名]
- 作成日: [日付]
- 総タスク数: [数]

## Phase 1: 初期実装（並列実行可能）

### 環境構築
- [ ] **[High]** 開発環境のセットアップ
- [ ] **[Medium]** 必要なライブラリのインストール

### 基礎実装
- [ ] **[High]** データモデルの実装
- [ ] **[High]** 基本的なAPI構造の作成
- [ ] **[Medium]** 設定ファイルの作成

## Phase 2: コア機能実装（Phase 1の基礎実装完了後）

### API実装
- [ ] **[High]** CRUD操作の実装
  - 前提: データモデルの実装
- [ ] **[Medium]** バリデーション処理の追加
  - 前提: CRUD操作の実装

### フロントエンド実装
- [ ] **[High]** 基本UIコンポーネントの作成
- [ ] **[Medium]** API連携の実装
  - 前提: API実装の完了

## Phase 3: 品質向上（Phase 2完了後）

### テスト
- [ ] **[High]** 単体テストの作成
  - 前提: 各機能の実装
- [ ] **[Medium]** 結合テストの作成
  - 前提: 単体テストの完了

### 最適化
- [ ] **[Low]** パフォーマンスチューニング
- [ ] **[Low]** コードリファクタリング

## 作業の進め方

### 並列作業の推奨
- Phase 1のタスクは全て並列で実行可能です
- 複数人で作業する場合は、Phase 1を分担することで効率化できます

### 優先度の考え方
- **High**: プロジェクトの進行に必須のタスク
- **Medium**: 機能完成に必要だが、一時的な代替手段があるタスク
- **Low**: 品質向上に寄与するが、後回しにできるタスク

### 注意事項
- 各フェーズ内のタスクは優先度順に並んでいます
- 前提条件が明記されているタスクは、該当タスクの完了を待つ必要があります
- 想定外の依存関係が発見された場合は、タスクリストを更新してください
```

## 使用例

```
/tasks                                    # 最新の設計書を使用
/tasks 001_user_management_design.md     # 特定の設計書を指定
/tasks ECサイト決済機能設計               # プロジェクト名で指定
```

## 注意事項

- タスクリストは`docs/tasks/`ディレクトリに、`[連番]_[プロジェクト名]_tasks.md`の形式で保存されます
- チェックボックス形式で出力されるため、進捗管理に活用できます
- 実際の作業中に依存関係の見直しが必要になった場合は、適宜更新してください
- 既存のタスクリストがある場合は、上書きするか確認します