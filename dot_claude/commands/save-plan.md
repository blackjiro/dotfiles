# save-plan

## 概要
Claude Codeで作成した計画内容を現在のワーキングディレクトリのSCRATCH_PAD.mdファイルに保存・管理するコマンドです。計画内容の追跡と整理を効率的に行えます。

## 実行方法
```
/save-plan
```

## 動作内容
1. 現在のセッションで作成した計画内容を取得
2. SCRATCH_PAD.mdファイルの存在確認
3. 既存内容との比較・分析
4. 適切な保存方法の決定：
   - 類似内容の場合：既存セクションを更新
   - 新規内容の場合：新しいセクションとして追加
   - 全く異なる内容の場合：ユーザーに確認後、上書き

## 保存形式
計画は以下の形式で保存されます：

```markdown
## [日時] - [計画タイトル]
作成日時: YYYY-MM-DD HH:MM:SS

### 概要
[計画の概要説明]

### 詳細計画
[計画の詳細内容]

### タスクリスト
- [ ] タスク1
- [ ] タスク2
- [ ] タスク3

### メモ・備考
[追加の注意事項やメモ]

---
```

## 実装詳細
このコマンドを実行すると、以下の処理を行います：

1. **ファイル確認**
   - 現在のワーキングディレクトリでSCRATCH_PAD.mdの存在確認
   - 存在する場合は内容を読み込み

2. **内容分析**
   - 既存の計画セクションを解析
   - 新しい計画との類似度を判定

3. **保存処理**
   - 類似度が高い場合（同じプロジェクトや目的）：既存セクションを更新
   - 新規の計画：タイムスタンプ付きで新規セクション追加
   - 完全に異なる内容：ユーザーに確認メッセージを表示

4. **通知**
   - 保存完了時にterminal-notifierで通知

## 使用例
```bash
# 計画を保存
/save-plan

# 出力例：
# ✅ 計画をSCRATCH_PAD.mdに保存しました
# 保存場所: ./SCRATCH_PAD.md
# セクション: [2025-01-27] - Webアプリケーション開発計画
```

## 注意事項
- SCRATCH_PAD.mdは各ワーキングディレクトリごとに作成されます
- SCRATCH_PAD.mdは自動的にバックアップされません
- 重要な計画は別途バックアップすることを推奨
- 類似判定は計画のタイトルと概要に基づいて行われます
- 大きく異なる計画の場合、上書き前に必ず確認を求めます
