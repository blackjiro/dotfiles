---
allowed-tools: Task(*), Read(*), Write(*), Grep(*), Glob(*), LS(*), WebSearch(*), TodoWrite(*), TodoRead(*)
description: "技術的な意思決定を文書化するためのADR（Architecture Decision Record）を作成"
---

# ADR（アーキテクチャデシジョンレコード）作成支援

技術的な意思決定を文書化するためのADR（Architecture Decision Record）を作成します。MADR（Markdown Architectural Decision Records）形式で出力します。

## 使用方法

このコマンドを実行すると、以下のプロセスでADRを作成します：

1. **要件のヒアリング**: 解決したい課題や調査内容について質問します
2. **情報収集**: Gemini CLIを使用してWeb検索を実施し、関連情報を収集します
3. **コード調査**: 必要に応じてコードベースを調査し、修正案を検討します
4. **ADR作成**: MADR形式でアーキテクチャ決定を文書化します
5. **妥当性検証**: 作成したADRの内容を検証します

## プロセス

### ステップ1: 要件のヒアリング

まず、以下の情報をお聞きします：

- **解決したい課題**: どのような技術的な問題に直面していますか？
- **調査内容**: どのような観点で調査を行いたいですか？
- **制約条件**: 考慮すべき制約や要件はありますか？
- **期待する成果**: この決定でどのような改善を期待していますか？

### ステップ2: 情報収集とオプション検討

Gemini CLIを使用して以下を調査します：
- 類似の問題に対する一般的な解決策
- ベストプラクティスと業界標準
- 各オプションの長所と短所
- 実装例やケーススタディ

Gemini CLIの使い方は以下です。
```bash
gemini --prompt "WebSearch: <query>"
```

### ステップ3: ADR作成

以下のMADR形式（日本語版）で文書化します：

```markdown
# {解決した問題と選択した解決策を表す短いタイトル}

## 背景と問題の説明

{背景と問題の説明を記述します。2〜3文の自由形式で記述するか、例示的なストーリーの形で記述します。問題を質問形式で表現し、コラボレーションボードや課題管理システムへのリンクを追加することもできます。}

## 検討したオプション

* {オプション1のタイトル}
* {オプション2のタイトル}
* {オプション3のタイトル}
* … <!-- オプションの数は変動可能 -->

## 決定結果

選択したオプション: "{オプション1のタイトル}"、理由: {正当化の理由。例：決定要因となる基準を満たす唯一のオプション | {force}を解決する | … | 最も良い結果が得られる（以下参照）}。

<!-- これはオプションの要素です。必要に応じて削除してください。 -->
### 結果として生じること

* 良い点: {ポジティブな結果。例：1つ以上の望ましい品質の改善、…}
* 悪い点: {ネガティブな結果。例：1つ以上の望ましい品質の妥協、…}
* … <!-- 結果の数は変動可能 -->
```

### ステップ4: 妥当性の検証

作成したADRについて以下の観点で検証します：
- 問題の定義が明確か
- オプションの検討が網羅的か
- 決定理由が論理的か
- 結果の評価が現実的か

## 出力

最終的なADRは、プロジェクトの `docs/adr/` ディレクトリに保存することを推奨します。ファイル名は `NNNN-short-title.md` の形式（例：`0001-use-react-for-frontend.md`）とします。

