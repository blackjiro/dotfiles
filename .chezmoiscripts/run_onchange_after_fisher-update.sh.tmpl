#!/usr/bin/env bash

# Set Homebrew PATH
{{ if eq .chezmoi.os "linux" -}}
eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"
{{ else if eq .chezmoi.os "darwin" -}}
eval "$(/opt/homebrew/bin/brew shellenv)"
{{ end -}}

# Check if fish is installed, exit if not
if ! command -v fish >/dev/null 2>&1; then
	echo "Fish shell is not installed yet. Skipping fisher setup."
	exit 0
fi

if ! fish -c "type fisher" >/dev/null 2>&1; then
	echo "Installing fisher"
	fish -c "curl -sL https://raw.githubusercontent.com/jorgebucaran/fisher/main/functions/fisher.fish | source && fisher install jorgebucaran/fisher"
fi

# .config/fish/fish_plugins hash: {{ include "dot_config/fish/fish_plugins" | sha256sum }}

fish -c "fisher update"